# MorphTesser Web

An online platform for high‑quality neuron morphology modeling and visualization. The frontend is built with React + Three.js, the backend with Spring Boot, and a Python service provides Draco compression. It supports SWC → OBJ/DRC conversion, interactive 3D preview, batch zip download, and public dataset browsing.

## Key Features
- Online modeling: upload SWC and generate high‑quality meshes (OBJ/DRC) with two modes: Fast / High quality
- 3D visualization: Three.js rendering, DRC‑first loading, recomputed smooth normals, interactive controls
- Batch download: ZIP ALL with high compression; optionally decode DRC to OBJ on the client then zip
- Public database: browse by dataset, search and view model details
- Embeddable view: lightweight Embed page for external sites

## Project Structure (key paths)
```
./
├─ morphtesser_web/
│  ├─ frontend/                  # React app
│  │  ├─ public/
│  │  │  └─ assets/images/       # static images
│  │  └─ src/                    # components/pages/services
│  ├─ backend/                   # Spring Boot backend
│  │  └─ src/main/java/...       # controllers/services/security
│  └─ backend/python_service/    # Python Draco tools & scripts
├─ DEPLOYMENT_GUIDE.md           # Synology NAS (direct) deployment
└─ NAS_DOCKER_DEPLOYMENT.md      # Synology NAS + Docker deployment
```

## Rendering Comparison (example)

![Before](morphtesser_web/frontend/public/assets/images/before_modeling_new.png)
![After](morphtesser_web/frontend/public/assets/images/after_modeling_new.png)

> Above: traditional SWC wireframe vs. high‑quality mesh generated by MorphTesser.

## Tech Stack
- Frontend: React 18, Material‑UI (MUI), Three.js, Axios
- Backend: Spring Boot 3 (Java 21), Spring Security, JPA
- Compression/Modeling: Python (FastAPI/Uvicorn), Draco
- Build & Deploy: Maven, Node.js (react‑scripts), Nginx (optional), Docker (optional)

## Quick Start (local development)
1) Backend
```bash
cd morphtesser_web/backend
mvn spring-boot:run
```

2) Frontend
```bash
cd morphtesser_web/frontend
npm install
npm start
```

3) Optional: Python service (if running standalone)
```bash
cd morphtesser_web/backend/python_service
pip install -r requirements.txt
python app.py
```

By default, the frontend dev server proxies to http://localhost:8080. Adjust the `proxy` field in `morphtesser_web/frontend/package.json` if needed.

## Production Deployment
- Synology NAS (direct JAR + Web Station): see `DEPLOYMENT_GUIDE.md`
- Synology NAS + Docker (recommended): see `NAS_DOCKER_DEPLOYMENT.md`

Both guides cover domain/DNS, HTTPS (Let’s Encrypt), reverse proxy, port‑forwarding, and firewall recommendations.

## Configuration
- Backend `application.properties`
  - database connection, upload dir, Python service URL, logging level
- Frontend `src/services/axios.config.js`
  - `baseURL` should point to `https://yourdomain.com/api` in production
- Nginx (optional)
  - proxy `/api/` to backend, serve static files directly, configure HTTPS certs

## Screenshots / Poster (optional)
![Video Poster](morphtesser_web/frontend/public/assets/images/video_poster.png)

## License & Acknowledgments
- Draco: Google Draco 3D compression
- Three.js: https://threejs.org/
- See individual packages for their LICENSE files

